# Kusuri Compass - 医薬品情報検索アプリケーション

Kusuri Compassは、医薬品の出荷状況や関連情報を多角的に検索・分析するためのWebアプリケーションポータルです。薬剤師の日常業務を支援する多様なツール（出荷状況検索、ヒヤリハット事例検索、感染症情報、花粉情報など）を統合しています。

## 1. アプリケーションのコンセプト

本アプリケーションは、Googleスプレッドシートや外部APIをデータソースとして利用し、クライアントサイドでデータを処理・表示するアーキテクチャを採用しています。

*   **データソース:** Googleスプレッドシート、Open-Meteo API、ウェザーニューズ APIなど。
*   **クライアントサイドキャッシュ:** `localforage`を利用し、データをブラウザにキャッシュすることで高速な表示を実現しています。
*   **データ更新:** 各ページにある更新ボタン（🔄）を押すことで、キャッシュを強制的にクリアし、最新のデータを再取得できます。

## 2. 機能モジュール詳細

### 2.1. 出荷状況検索 (メイン)
医薬品の品名や成分名から、現在の出荷状況を検索するメイン機能です。

*   **ファイル:** `index.html`, `js/main.js`
*   **機能:**
    *   医薬品名、成分名、規格/剤形/メーカー名の各項目でAND検索が可能です。
    *   「通常出荷」「限定出荷」「供給停止」のステータスで結果をフィルタリング。
    *   検索結果から、代替薬検索、ヒヤリハット検索、公式サイトへ直接アクセスできます。

### 2.2. 情報更新日検索
データの更新履歴に特化した検索機能です。いつ、どの医薬品情報が更新されたかを追跡できます。

*   **ファイル:** `update/index.html`, `update/js/main.js`
*   **機能:**
    *   「3日以内」「7日以内」といった期間を指定して、情報が更新された薬剤をフィルタリング。
    *   最近供給が再開された、あるいは停止した医薬品を素早く見つけるのに役立ちます。

### 2.3. YJコード検索
YJコードを基に、薬効や剤形が類似する代替薬を検索する機能です。

*   **ファイル:** `yjcode/index.html`, `yjcode/js/main.js`
*   **機能:**
    *   12桁のYJコードを入力して検索。同一薬効群や同一成分の代替薬候補を一覧表示できます。

### 2.4. 薬局ヒヤリ・ハット事例ビューア
医薬品に関連するヒヤリ・ハット事例（インシデントレポート）を検索・閲覧する機能です。

*   **ファイル:** `hiyari_app/index.html`, `hiyari_app/js/main.js`
*   **機能:**
    *   日本医療機能評価機構のAPIを利用し、医薬品名やキーワードで過去の事例を検索できます。

### 2.5. 全国感染状況
全国の感染症発生動向を地図とグラフで可視化する機能です。

*   **ファイル:** `infection-surveillance-app/index.html`
*   **機能:**
    *   国立感染症研究所（IDWR）のデータを元に、インフルエンザやCOVID-19などの流行状況を地図上で確認できます。

### 2.6. 花粉飛散リアルタイム監視
全国の花粉飛散状況をリアルタイムで可視化する機能です。

*   **ファイル:** `pollen-app/index.html`
*   **機能:**
    *   ウェザーニューズ社の観測データを活用し、地図上で花粉飛散量を確認できます。

### 2.7. ぱっくんスタンプ
お子様が楽しく服薬を続けられるようにサポートするスタンプカードアプリです。

*   **ファイル:** `Okusuri_pakkun/usage_guide.html` (アプリ本体は `Okusuri_pakkun/index.html` だが、メニューからはガイドへ遷移)
*   **機能:**
    *   服薬ごとにスタンプを押し、キャラクターからの応援や表彰状でモチベーションを高めます。

### 2.8. 外部連携機能
*   **代替薬ナビゲーター:** 生成AIを活用して代替薬を提案します。
*   **おくすりぱっくん:** 小児用医薬品の飲み合わせ検索機能です。

## 3. 技術仕様

*   **フロントエンド:** HTML, JavaScript, Tailwind CSS
*   **データストレージ:** LocalForage (IndexedDBラッパー)
*   **主要ライブラリ:** Chart.js (グラフ), Leaflet.js (地図), marked.js (Markdown)

## 4. 使い方・セットアップ

1.  リポジトリをクローンまたはダウンロードします。
2.  Webサーバーのルートにファイルを配置するか、ローカルで `index.html` を直接ブラウザで開きます。
3.  初回アクセス時、必要なデータが読み込まれます。
4.  各機能の詳しい使い方は `help/index.html` を参照してください。

## 5. 免責事項

*   本ツールは、公的機関が公開しているデータに基づいて情報を表示しますが、その正確性、完全性、最新性を保証するものではありません。最終的な判断は、必ず公式サイトや添付文書をご確認ください。
*   本ツールの利用は、利用者自身の責任において行うものとします。開発者は、本ツールの利用によって生じたいかなる損害についても、一切の責任を負いません。
