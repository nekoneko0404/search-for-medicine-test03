<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>【Kusuri Compass】YJコード検索</title>
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' https://cdn.jsdelivr.net https://unpkg.com https://www.googletagmanager.com;
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdn.jsdelivr.net;
        img-src 'self' data:;
        connect-src 'self' https://docs.google.com https://*.googleusercontent.com https://hiyari-proxy-708146219355.asia-east1.run.app;
    ">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4.1.16" integrity="sha384-hexzD4m33RNzdvbV2ZW2FJcYlGemNPAdBKQsEcc389OUSwlT9xpg4BeEtiCeylHY" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/localforage@1.10.0/dist/localforage.min.js" integrity="sha384-MTDrIlFOzEqpmOxY6UIA/1Zkh0a64UlmJ6R0UrZXqXCPx99siPGi8EmtQjIeCcTH" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght400;700&display=swap">
    <link rel="stylesheet" href="../unify.css">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VXSZGE4HP7"></script>
    <script src="../gtag.js"></script>
</head>
<body class="bg-gray-200 p-2 sm:p-4 flex flex-col items-center min-h-screen">

    <div class="page-wrapper w-full">
        <div class="page-header flex flex-col md:flex-row md:items-center md:justify-between">
            <div class="flex items-center justify-between md:space-x-4">
                <h2 class="page-title flex items-center space-x-2">
                    <a href="../index.html"><img src="../images/KusuriCompass.png" alt="Kusuri Compass Icon" class="h-12 w-12 object-contain"></a>
                    <span>【Kusuri Compass】YJコード検索</span>
                </h2>

            </div>
            <div class="flex items-center space-x-2 mt-2 md:mt-0">
                <input type="text" id="yjCodeInput" placeholder="YJコードを入力してください:" class="w-48 rounded border-gray-300 shadow-xs focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 transition ease-in-out duration-150 p-2">
                <button id="searchButton" class="unified-button px-3 py-1.5">
                    検索
                </button>
            </div>

        </div>
        
        <div class="search-form-grid flex flex-wrap gap-4 mb-6">
            <div class="input-container flex items-center gap-2">
                <label class="w-20 text-gray-700 text-sm font-medium">検索項目:</label>
                <div class="flex-1 flex flex-wrap lg:flex-nowrap gap-x-4 gap-y-1 text-sm bg-slate-50 p-2 rounded-xl shadow-inner border border-slate-200">
                    <label class="flex items-center">
                        <input type="checkbox" id="digits3" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out" checked>
                        <span class="ml-1 text-slate-700 text-xs">薬効群3桁</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" id="digits4" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out" checked>
                        <span class="ml-1 text-slate-700 text-xs">薬効群4桁</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" id="digits7" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out">
                        <span class="ml-1 text-slate-700 text-xs">成分</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" id="digits8" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out" checked>
                        <span class="ml-1 text-slate-700 text-xs">剤形</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" id="digits9" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out">
                        <span class="ml-1 text-slate-700 text-xs">規格単位</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" id="digits11" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out">
                        <span class="ml-1 text-slate-700 text-xs">規格内番号</span>
                    </label>
                </div>
            </div>
            <div class="input-container flex items-center gap-2">
                <div class="w-20 text-gray-700 text-sm font-medium">出荷状況:</div>
                <div class="flex-1 flex flex-wrap lg:flex-nowrap gap-x-4 gap-y-1 text-sm bg-slate-50 p-2 rounded-xl shadow-inner border border-slate-200">
                    <div class="checkbox-item flex items-center">
                        <input type="checkbox" id="statusNormal" value="通常出荷" checked class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out">
                        <label for="statusNormal" class="ml-1 text-xs text-gray-900">通常出荷</label>
                    </div>
                    <div class="checkbox-item flex items-center">
                        <input type="checkbox" id="statusLimited" value="限定出荷" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out">
                        <label for="statusLimited" class="ml-1 text-xs text-gray-900">限定出荷</label>
                    </div>
                    <div class="checkbox-item flex items-center">
                        <input type="checkbox" id="statusStop" value="供給停止" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out">
                        <label for="statusStop" class="ml-1 text-xs text-gray-900">供給停止</label>
                    </div>
                </div>
            </div>
            <span id="dataDate" class="text-gray-500 text-xs whitespace-nowrap flex items-end justify-end"></span>
        </div>

        <div id="messageBox" class="text-sm sm:text-base text-center p-3 rounded-lg hidden message-box-center w-3/4" role="alert"></div>
    </div>

    <div id="loadingIndicator" class="loading-container hidden">
        <div class="spinner"></div>
    </div>
    <div id="progressBarContainer" class="w-full max-w-7xl mt-4 hidden">
        <div class="progress-bar">
            <div id="progressBar" class="progress-bar-fill w-0"></div>
        </div>
        <p id="progressMessage" class="text-xs text-gray-500 mt-1 text-center"></p>
    </div>
    
    <div id="resultsContainer" class="w-full max-w-7xl mt-4"></div>

    <footer class="w-full mt-8 py-4 text-center text-gray-500 text-sm">
        <p>© 2025 【Kusuri Compass】</p>
    </footer>

    <script src="../common.js"></script>
    <script src="script.js"></script>
</body>
</html>