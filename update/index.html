<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>【Kusuri Compass】情報更新日検索</title>
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' https://cdn.jsdelivr.net https://unpkg.com https://www.googletagmanager.com;
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdn.jsdelivr.net;
        img-src 'self' data:;
        connect-src 'self' https://docs.google.com https://*.googleusercontent.com https://hiyari-proxy-708146219355.asia-east1.run.app https://cdn.jsdelivr.net https://www.google-analytics.com;
    ">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4.1.16" integrity="sha384-hexzD4m33RNzdvbV2ZW2FJcYlGemNPAdBKQsEcc389OUSwlT9xpg4BeEtiCeylHY" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/localforage@1.10.0/dist/localforage.min.js" integrity="sha384-MTDrIlFOzEqpmOxY6UIA/1Zkh0a64UlmJ6R0UrZXqXCPx99siPGi8EmtQjIeCcTH" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght400;700&display=swap">
    <link rel="stylesheet" href="../unify.css">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VXSZGE4HP7"></script>
    <script src="../gtag.js"></script>
</head>
<body class="bg-gray-200 p-4 sm:p-8 flex flex-col items-center min-h-screen">

    <div class="page-wrapper">
        <div class="page-header">
            <h2 class="page-title flex items-center space-x-2">
                <a href="../index.html"><img src="../images/KusuriCompass.png" alt="Kusuri Compass Icon" class="h-8 w-8 sm:h-10 sm:w-10"></a>
               <span>【Kusuri Compass】情報更新日検索</span>
            </h2>
        </div>
        <span id="dataDate" class="text-gray-500 text-xs whitespace-nowrap mb-4 block text-center"></span>
        
        <div class="flex flex-col sm:flex-row items-stretch sm:items-center gap-2 mb-6">
            <input type="text" id="searchInput" placeholder="品名、成分名で検索" class="unified-input w-full sm:w-auto flex-grow">
            <div class="flex gap-2 flex-wrap justify-start">
                <button id="searchButton" class="unified-button">検索</button>
                <button id="clearButton" class="unified-button">クリア</button>
                <button id="recoveryButton" class="unified-button">復旧情報</button>
            </div>
        </div>

        <div class="flex flex-col lg:flex-row gap-4 mb-6">
            <div class="bg-white p-4 rounded-lg shadow-md flex-grow">
                <h3 class="font-semibold text-gray-700 mb-2 text-base">出荷状況:</h3>
                <div id="status-filters" class="flex flex-wrap gap-x-4 gap-y-2 text-sm">
                    <label class="flex items-center"><input type="checkbox" data-status="通常出荷" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out" checked><span class="ml-1.5 text-gray-900">通常出荷</span></label>
                    <label class="flex items-center"><input type="checkbox" data-status="出荷制限" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out" checked><span class="ml-1.5 text-gray-900">限定出荷</span></label>
                    <label class="flex items-center"><input type="checkbox" data-status="供給停止" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out" checked><span class="ml-1.5 text-gray-900">供給停止</span></label>
                    <label class="flex items-center"><input type="checkbox" data-trend="▲" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out"><span class="ml-1.5 text-gray-900">▲</span></label>
                    <label class="flex items-center"><input type="checkbox" data-trend="▼" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out"><span class="ml-1.5 text-gray-900">▼</span></label>
                </div>
            </div>
            <!-- 情報更新日フィルター -->
            <div class="bg-white p-4 rounded-lg shadow-md flex-grow">
                <h3 class="font-semibold text-gray-700 mb-2 text-base">情報更新日:</h3>
                <div id="date-filters" class="flex flex-wrap gap-x-4 gap-y-2 text-sm">
                    <label class="flex items-center"><input type="checkbox" data-days="all" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out" checked><span class="ml-1.5 text-gray-900">すべて</span></label>
                    <label class="flex items-center"><input type="checkbox" data-days="3" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out"><span class="ml-1.5 text-gray-900">3日以内</span></label>
                    <label class="flex items-center"><input type="checkbox" data-days="7" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out"><span class="ml-1.5 text-gray-900">7日以内</span></label>
                    <label class="flex items-center"><input type="checkbox" data-days="14" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out"><span class="ml-1.5 text-gray-900">14日以内</span></label>
                    <label class="flex items-center"><input type="checkbox" data-days="30" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out"><span class="ml-1.5 text-gray-900">1ヶ月以内</span></label>
                    <label class="flex items-center"><input type="checkbox" data-days="90" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out"><span class="ml-1.5 text-gray-900">3ヶ月以内</span></label>
                </div>
            </div>
        </div>
        <div id="messageBox" class="text-sm sm:text-base text-center p-3 rounded-lg hidden message-box-center w-3/4"></div>
    </div>

    <div id="loadingIndicator" class="loading-container hidden">
        <div class="spinner"></div>
    </div>
    
    <div id="resultsContainer" class="w-full max-w-7xl mt-8"></div>

    <footer class="w-full mt-8 py-4 text-center text-gray-500 text-sm">
        <p>© 2025 【Kusuri Compass】</p>
    </footer>

    <button id="reload-data" class="fixed bottom-4 right-4 text-4xl transition-all duration-300 ease-in-out transform hover:scale-125 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
        <span role="img" aria-label="データを再読み込み">🔄</span>
    </button>

    <script src="script.js"></script>
</body>
</html>